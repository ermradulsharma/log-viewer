# Security & RBAC

## Role-Based Access Control (RBAC)

LogViewer v1.0.0 introduces a robust authorization system to control access to sensitive log data and actions.

### Built-in Roles

| Role        | Description                                                                                                 |
| :---------- | :---------------------------------------------------------------------------------------------------------- |
| **Admin**   | Full access to all features, including deletion, configuration, and user management.                        |
| **Auditor** | Read-only access to logs and analytics. Can view the Audit Trail but cannot modify data or settings.        |
| **Viewer**  | Restricted access. Can only view the Dashboard and Log list. No access to details, notes, or deep insights. |

### Defining User Roles

By default, LogViewer assigns the **Admin** role to all users. To implement custom role logic, use the `LogViewer::auth` method in your `AppServiceProvider`'s `boot` method.

```php
use Ermradulsharma\LogViewer\LogViewer;

public function boot()
{
    LogViewer::auth(function ($request) {
        $user = $request->user();

        if (!$user) {
            return 'viewer'; // Unauthenticated guests get read-only viewer access (or return null to block)
        }

        if ($user->email === 'admin@example.com') {
            return 'admin';
        }

        if ($user->role === 'auditor') {
            return 'auditor';
        }

        return 'viewer';
    });
}
```

## System Audit Trail

For enterprise compliance and security monitoring, LogViewer automatically records critical administrative actions.

### What is logged?

- Log Deletions (Single & Bulk)
- Downloads
- Configuration Changes
- Saved Searches
- External Integrations (Push to Jira/GitHub)

### Viewing the Audit Log

An interactive **Audit Trail** widget is available on the Dashboard for users with `Admin` or `Auditor` privileges. It displays:

- **Time**: Precise timestamp of the action.
- **User**: The User ID or identifier of the actor.
- **Action**: The specific operation performed (e.g., `delete_log`, `download_report`).
- **IP Address**: The origin IP of the request.

> **Note**: Audit logs are stored continuously and are not subject to the standard log retention policy to ensuring security history is preserved.
